<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>QUnit tests</title>
		<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.12.0.css">
		<script src="http://code.jquery.com/qunit/qunit-1.12.0.js"></script>
		<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="../dist/chcontext.js"></script>
		<script>
			test("do not show header when there is no search results", function() {
				equal($("#widget-without-results h1:first").is(":visible"), false);
			});
			test("show header when there are search results", function() {
				equal($("#widget-with-results h1:first").is(":visible"), true);
			});
			test("hide widget after refresh when no results are found", function() {
				equal($("#widget-with-refresh").is(":visible"), true);
				$("#widget-with-refresh").attr("data-query", "this is a really bad query");
				PSNC.chcontext.refresh("#widget-with-refresh");
				equal($("#widget-with-refresh").is(":visible"), false);
			});
			test("do not show results container when init is disabled", function() {
				equal($("#widget-with-init-disabled .chcontext-widget-container").length, 0);
			});
			test("do not show images when show-img=false", function() {
				equal($("#widget-with-without-img .chcontext-widget-container .chcontext-widget-container-thumbnail-wrapper").length, 0);
			});
			test("show images when show-img=true", function() {
				notEqual($("#widget-with-with-show-img .chcontext-widget-container .chcontext-widget-container-thumbnail-wrapper").length, 0);
			});
			test("show images by default", function() {
				notEqual($("#widget-with-img .chcontext-widget-container .chcontext-widget-container-thumbnail-wrapper").length, 0);
			});
			
		</script>
	</head>
	<body>
		<div id="qunit"></div>
		<div id="qunit-fixture">
			<div id="widget-without-results" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-query="querywithoutsearchresults" >
				<h1>Widget header</h1>
			</div>
			<div id="widget-with-results" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-query="mickiewicz" >
				<h1>Widget header</h1>
			</div>
			<div id="widget-with-refresh" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-query="obraz" >
				<h1>Widget header</h1>
			</div>
			<div id="widget-with-init-disabled" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-init-disabled="true" data-query="mickiewicz" >
			</div>
			<div id="widget-with-without-img" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-show-img="false" data-query="mickiewicz" >
			</div>
			<div id="widget-with-with-show-img" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-show-img="true" data-query="mickiewicz" >
			</div>
			<div id="widget-with-img" class="chcontext-widget-wrapper" data-searchProvider="FBC+" data-query="mickiewicz" >
			</div>
		</div>
	</body>
</html>